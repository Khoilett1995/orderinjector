<!DOCTYPE html>
<html lang="en">
<head>
    <h1> Iress UAT - Resting orders simulator </h1>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    <py-env>
    </py-env>
    <title>Document</title>
</head>
<body>

    <label>Account:</label><br>
    <input type = "text" id="myText1"><br>

    <label>SecCode:</label><br>
    <input type = "text" id = "myText2"><br>

    <label>Exchange:</label><br>
    <input type = "text" id = "myText3"><br>

    <label>Life:</label><br>
    <input type = "text" id = "myText4"><br>

    <label>Dest:</label><br>
    <input type = "text" id = "myText5"><br>
    
    <label>Side:</label><br>
    <input type = "text" id = "myText6"><br>
    
    <label>Vol:</label><br>
    <input type = "text" id = "myText7"><br>

    <label>Price:</label><br>
    <input type = "text" id = "myText8"><br>

    <label>Spread:</label><br>
    <input type = "text" id = "myText9"><br>

    <label>Price Step:</label><br>
    <input type = "text" id = "myText10"><br>

    <button id="myButton1" pys-onclick="my_function"> Submit </button>

    <p id="text-output"></p>
    
    <py-script>
        from zeep import Client, Settings
        import logging
        import os
        import time
        import click
        import socket
        import uuid
        import time

        def my_function(a): 

            Account=Element("myText1").element.value 
            console.log(Account)

            SecCode=Element("myText2").element.value 
            console.log(SecCode)

            Exchange=Element("myText3").element.value 
            console.log(Exchange)

            Life=Element("myText4").element.value 
            console.log(Life)

            Dest=Element("myText5").element.value 
            console.log(Dest)

            Side=Element("myText6").element.value 
            console.log(Side)

            Vol=Element("myText7").element.value 
            console.log(Vol)

            Price=Element("myText8").element.value 
            console.log(Price)
 
            Spread=Element("myText9").element.value 
            console.log(Spread)

            PriceStep=Element("myText9").element.value 
            console.log(PriceStep)

            
            username = "admin@Iress"
            appId = "uuid4"  
            companyname = "IRESS"
            password = "pMafjqTeSjnxSQgJY2Zg"
            
            settings = Settings(strict = False, xml_huge_tree = True)
            
            iosPlusWsdl = "http://127.0.0.1:51234/wsdl.aspx?un=admin&cp=iress&svc=IOSPLUS&svr=CIBCISI&pw=pMafjqTeSjnxSQgJY2Zg"
            iosPlusClient = Client(iosPlusWsdl, settings=settings)
            iosPlusClientFactory = iosPlusClient.type_factory('http://webservices.iress.com.au/v4/')
            iosPlusClient.set_ns_prefix("ns0", "http://webservices.iress.com.au/v4/")
            iressSessionStartResponse = iosPlusClient.service.IRESSSessionStart(iosPlusClientFactory.IRESSSessionStartInput(Header=iosPlusClientFactory.IRESSSessionStartInputHeader(Updates=False), Parameters=iosPlusClientFactory.IRESSSessionStartInputParameters(UserName=username, CompanyName=companyname, ApplicationID=appId, Password=password, SessionNumberToKick=-2, KickLikeSessions=True)))
            console.log(iressSessionStartResponse)
            
            
    </py-script>
    
</body>
</html>
